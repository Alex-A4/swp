<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ws="ws-component">
<head>
   <title>Demo: Views</title>
   <script type="text/javascript">
      window.wsConfig = {
         WSRootPath: '/sbis3-ws/ws/',
         wsRoot: '/sbis3-ws/ws/',
         WSTheme: 'wi_scheme',
         resourceRoot: '/',
         nostyle: true,
         globalConfigSupport: false
      };
      window.WSTheme = 'wi_scheme';
   </script>
   <script type="text/javascript" id="dev-style-enable">
      (function () {
         window.wsConfig.nostyle = false;
      })();
   </script>
   <script type="text/javascript" data-pack-name="contents" src="/contents.js"></script>
   <script type="text/javascript" data-pack-name="ws" src="/sbis3-ws/ws/ext/jquery-min.js"></script>
   <script type="text/javascript" data-pack-name="ws" src="/sbis3-ws/ws/ext/jquery-cookie-min.js"></script>
   <script type="text/javascript" data-pack-name="ws" src="/sbis3-ws/ws/ext/jquery-notouch-min.js"></script>
   <script type="text/javascript" src="/sbis3-ws/ws/ext/requirejs/require.js"></script>
   <script type="text/javascript" src="/sbis3-ws/ws/ext/requirejs/config.js"></script>
   <script type="text/javascript" src="/sbis3-ws/ws/lib/core.js"></script>
   <link rel="stylesheet" type="text/css" href="/sbis3-ws/ws/css/core.css"/>
   <script type="text/javascript" data-pack-name="ws" src="/sbis3-ws/ws/res/js/bootup.js"></script>
   <style>
      html, body {
         font-family: 'TensorFont Regular', 'TensorFont'!important;
         font-size: 14px!important;
      }
   </style>
   <style>
      .ComponentDescr {
         font-weight: bold;
      }
      .ComponentBlock {
         width: 300px;
      }
   </style>
   <script type="text/javascript" id="ws-include-css"></script>
   <link rel="stylesheet" type="text/css" href="../fonts/index.css"/>
   <link rel="stylesheet" type="text/css" href="../icons/index.css"/>
   <link rel="stylesheet" type="text/css" href="../components/themes/online/online.css"/>
</head>
<body class="view-main">
<div id="Back"></div>
<table style="margin: 16px;">
   <tr height="350" style="vertical-align: top;">
      <td>
         <p class="ComponentDescr">TreeView - footer</p>
         <div id="TreeView" class="ComponentBlock"></div>
      </td>
   </tr>
   <tr height="350" style="vertical-align: top;">
      <td>
         <p class="ComponentDescr">TreeDataGridView - footer</p>
         <div id="TreeDGView" class="ComponentBlock"></div>
      </td>
   </tr>
</table>

<script type="text/javascript">
require(['Core/core-init'],function () {
   $(document).ready(function () {
      require(["SBIS3.CONTROLS/Link", 'SBIS3.CONTROLS/Tree/View', 'SBIS3.CONTROLS/Tree/DataGridView'], function (Link, TreeView, TreeDataGridView) {
         var 
            TreeViewItems = [
               {
                  id: 1,
                  title: 'Item 1',
                  flag: true,
                  par: null,
                  'par@': true
               },
               {
                  id: 2,
                  title: 'Item 2 (скрытый узел)',
                  flag: false,
                  par: null,
                  'par@': false
               },
               {
                  id: 22,
                  title: 'Item 2-2',
                  flag: false,
                  par: 2
               },
               {
                  id: 11,
                  title: 'Item 1-1',
                  flag: true,
                  par: 1,
                  'par@': true
               },
               {
                  id: 111,
                  title: 'Item 1-1-1',
                  flag: true,
                  par: 11
               },
               {
                  id: 112,
                  title: 'Item 1-1-2',
                  flag: true,
                  par: 11
               },
               {
                  id: 113,
                  title: 'Item 1-1-3',
                  flag: true,
                  par: 11
               },
               {
                  id: 3,
                  title: 'Item 3',
                  flag: true,
                  par: null,
                  'par@': true
               },
               {
                  id: 33,
                  title: 'Title 3-3',
                  flag: true,
                  par: 3,
                  'par@': true
               },
               {
                  id: 333,
                  title: 'Title 3-3-3',
                  flag: true,
                  par: 33
               }
            ];

         new Link({
            element: "Back",
            caption: 'Назад',
            href: '../../',
            icon: 'sprite:icon-16 icon-DayBackward icon-primary'
         });

         new TreeView({
            keyField: 'id',
            element: 'TreeView',
            items : TreeViewItems,
            hierField : 'par',
            folderFooterTpl: '<component data-component="SBIS3.CONTROLS/Link"><opt name="caption" value="footer {{=it.item.get(\'title\')}}"/></component>',
            footerTpl: '<br/><component data-component="SBIS3.CONTROLS/Link"><opt name="caption" value="<b>footer button</b>"/></component>',
            allowEnterToFolder : true
         });

         new TreeDataGridView({
            keyField: 'id',
            element: 'TreeDGView',
            items : TreeViewItems,
            folderFooterTpl: '<component data-component="SBIS3.CONTROLS/Link"><opt name="caption" value="footer {{=it.item.get(\'title\')}}"/></component>',
            footerTpl: '<br/><component data-component="SBIS3.CONTROLS/Link"><opt name="caption" value="<b>footer button</b>"/></component>',
            columns : [
               {
                  title: 'id',
                  field: 'id'
               },
               {
                  title: 'title',
                  field: 'title'
               }
            ],
            hierField: 'par',
            allowEnterToFolder : true
         });
      });
   })
});
</script>
</body>
</html>
