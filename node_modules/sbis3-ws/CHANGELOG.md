CHANGELOG
==========

3.7.0
-----


### Важное

### Ошибки

### Новый функционал

### Стилизация

### Прочие изменения

3.6.2
-----

### Важное

### Ошибки

### Новый функционал
  - Для `$ws.single.Infobox` добавлено событие `onBeforeShow` позволяющее отменить показ инфобокса. 

3.6.1.20
--------

### Новый функционал
  - Для выпадающего списка добавлен управляющий css-класс `.ws-dropdown-fixed-width`, фиксирующий ширину выпадающего 
  списка даже при длинных значениях. При этом у не поместившихся значений добавляется троеточие в конце и тултип с 
  полным сообщением. 
  - Теперь у полей дат при двузначном режиме отображения года год определяется не всегда как 20XX, а в зависимости от 
  Параметра `centuryDivision`. По умолчанию значение 70, т.е. диапазон \[1970..2069\]. Подробности в описании параметра.

3.6.1
-----


### Важное

### Ошибки

### Новый функционал
  - Канал сообщений errors в который отправляются сообщения о различных ошибках. Сейчас поддерживается:
    - onHTTPError - при любой HTTP-ошибке
    - onRPCError - при любой JSON-RPC-ошибке
    - onAuthError - ошибка авторизации в процессе работы приложения (401 от БЛ или изменилась кука)
  - Канал сообщений luntik в который событием onInit контролы сообщают о своем рождении
  - Для `$ws.proto.Context` добавлен метод `createDependent`, возвращающий дочерний для данного новый контекст
  - Хелпер `$ws.helpers.isElementVisible` проверяющий видимость переданного элемента 
  - Для `$ws.proto.AreaAbstract` добавлена опция `independentContext`, позволяющая создать независимый контекст для 
данной области. Это позволит избегать обмена данными между контролами с одинаковыми названиями в разных контейнерах, 
окнах. В Джине для Окон XAML добавлена опция `Поведение — Создавать независимый контекст` 
  - Для контрола Изображение добавлена опция `allowSizeIncrease`, позволяющая вписывать небольшие изображения в 
контейнер с возможностью их увеличения. В Джине добавлена опция `Отображение — Разрешено увеличение размеров`
  - Функция $ws.helpers.dispatchIframeWheelEventsToParentDocument, пробрасывающая события колёсика из iframe в родительский документ. 
    Обычно ифреймы захватывают мышиные события и не прокидывают их в родительский документ, что не даёт возможности его крутить, если курсор расположен над ифреймом.
    Этот метод устанавливает обработчик события колёсика, который смотрит, находится ли мышиный курсор над чем-то в ифрейме, у чего есть верт. прокрутка
     (чтобы можно было крутить прокручиваемые области внутри ифрейма), и, если нет, то пробрасывает событие родителям ифрейма вверх по иерархии.

### Стилизация

### Прочие изменения
  - Объявлен устаревшим $ws.single.ControlStorage целиком
  - Объявлен устаревшим $ws.core.appendAuthError()
  - Выключена проверка наличия события у контрола при подписке на его событие (strictMode у его eventBus-а)
  - Теперь в `$ws.helpers.prepareGetRPCInvocationURL` ИдО передается как есть без какого-либо приведения типов, за исключением сложных идентификаторов где извлекается и изменяется имя объекта
  - `$ws.single.UserConfig` и `$ws.single.ClientsGlobalConfig` при записи и удалении параметра сразу вносят изменения в контекст не дожидаясь ответа от БЛ


3.6.0
-----

### Важное
  - Вызов `Record.update(true)` объявлен устаревшим. Будет удален с версии 3.7.
    Рекомендуется заменить на передачу через словарь `Record.update({ consistencyCheck: true })`;

### Ошибки



### Новый функционал
  - Добавлен новый элемент управления "Ярлыки закладок" (SBIS3.CORE.TabButtons). Показывает только ярлыки без самой контентной области.
  - В `Record.update` можно передавать параметры.
    Поддерживается параметр diffOnly (`Record.update({ diffOnly: true })`) - при его передаче будут отправлены на сервер только измененные поля.
  - В метод $ws.helpers.format() добавлена возможность форматировать js-объект.
  - Добавлен новый элемент управления "Фильтр раздела" (SBIS.CORE.PageFilter). Позволяет отображать необходимые данные для пользователя.
  - Добавлена опциональная возможность сохранять последнее состояние страницы (для пользователя).
  - Добавлен новый элемент управления "Строка поиска" (SBIS3.CORE.SearchString).
  - Метод табличного представления toggleColumn умеет принимать объект (`browser.toggleColumn({fieldName:false})`).
  - Плагин для jQuery, позволяющий по любому DOM-элементу найти ближайший контрол, которому он принадлежит. Пример: `$('.ws-tabs-button-left').wsControl()`

### Стилизация
  - Копонент "Ярлыки закладок" переведен на новый дизайн

### Прочие изменения
  - Теперь на экране не может быть одновременно более одного индикатора загрузки. При отображении нового предыдущий скрывается и наоборот.
  - Убраны опция из `LoadingIndicator`: `showInWindow`, `modal`.
