<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <title>Core speed test</title>

   <link rel="stylesheet" data-pack-name="ws-core-styles" type="text/css" href="/css/core.css" />
   <link rel="stylesheet" data-pack-name="ws-core-styles" type="text/css" href="/css/themes/wi_scheme.css" />

   <script type="text/javascript">
      // new config support
      window.wsConfig = {
         cdnRoot: '/lib/Ext/',
         wsRoot: '/',
         appRoot: '/',
         resourceRoot: '/resources/',
         defaultServiceUrl: '/service/',
         fasttemplate: false,
         userConfigSupport: false,
         globalConfigSupport: false
      };
   </script>
   <script type="text/javascript" src="/ext/requirejs/require.full.js" data-pack-name="skip"></script>
   <script type="text/javascript" src="/ext/requirejs/require.full.js" data-pack-name="skip"></script>
   <script type="text/javascript" src="/ext/requirejs/bundles.js" data-pack-name="skip"></script>
   <script type="text/javascript" src="/ext/requirejs/config.js" data-pack-name="skip"></script>
   <script type="text/javascript" src="/ext/jquery-min.js"  data-pack-name="skip"></script>
   <script type="text/javascript" src="/ext/jquery-cookie-min.js"  data-pack-name="skip"></script>
   <script type="text/javascript" src="/core.js"  data-pack-name="skip"></script>
   <script type="text/javascript">
      var _log = [];

      function log(msg) {
         _log.push({
            time: new Date(),
            text: msg
         });
      }

      function padLeft(str) {
         var pad = "0000";
         return pad.substring(0, pad.length - str.length) + str;
      }

      function showLog() {
         var text = '';
         for (var i = 0, l = _log.length; i < l; i++) {
            if (i == 0) {
               text += padLeft('0') + ': ' + _log[i].text + '<br>';
            } else {
               text += padLeft('' + (_log[i].time - _log[i-1].time)) + ': ' + _log[i].text + '<br>';
            }
         }
         $('#output').html(text);
      }

      log('start');
   </script>
   <script type="text/javascript" src="/lib/core.js"></script>
   <script type="text/javascript">
      require(['Core/core-init'], function(cInit) {
         cInit.addCallback(function(){
            log('core loaded');
         });
      });

      require(['Core/core-init'], function(cInit) {
         cInit.addCallback(function(){
            require(['Core/EventBus'], function(EventBus) {
               EventBus.globalChannel().once('bootupReady', function() {
                  log('bootupReady');
               });
            });
         });
      });

      require(['Core/core-init'], function(cInit) {
         cInit.addCallback(function(){
            requirejs(['bootup'], function(bootup) {
               log('bootup loaded');
               bootup();
            });
         });
      });

   </script>
</head>
<body>
   <div data-component="Deprecated/Controls/Button/Button" onclick="showLog()">
      <opt name="caption" value="Show log"></opt>
   </div>
   <div id="output" style="width: 200px;"></div>
</body>
</html>