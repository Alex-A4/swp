define('Core/CssLoader/CssLoader', [
   'Core/IoC',
   'Core/core-extend',
   'Core/constants',
   'Core/LinkResolver/LinkResolver',
   'Transport/XHRTransport'
], function(IoC, coreExtend, constants, LinkResolver) {
   'use strict';

   /**
    * Need this class to store data about css links while loading it
    */

   var CssLoader = coreExtend.extend([], {
      linkResolver: null,
      constructor: function(linkResolver) {
         this.css = {};
         this.linkResolver = linkResolver;
      },
      loadCssAsync: function(name) {
         var self = this;
         var url = self.linkResolver.resolveLink(name, 'css');
         return IoC.resolve('ITransport', {
            method: 'GET',
            dataType: 'text',
            url: url
         }).execute();
      },
      loadCssThemed: function(name, themes) {
         var self = this;
         var defArr = [];
         for(var i = 0; i < themes.length; i++) {
            var url = self.linkResolver.resolveCssWithTheme(name, themes[i]);
            defArr.push(IoC.resolve('ITransport', {
               method: 'GET',
               dataType: 'text',
               url: url
            }).execute());
         }
         return Promise.all(defArr);
      }
   });

   return CssLoader;
});
