define('Core/core-extensions', [
   'Core/constants', 
   'Core/Deferred', 
   'Core/ParallelDeferred',
   'Core/RightsManager',
   'Core/ExtensionsManager',
   'View/Runner/Text/templates/objectFunctionHeaderTemplate',
   'is!browser?WS.Data/ContextField/Flags',
   'is!browser?WS.Data/ContextField/Record',
   'is!browser?WS.Data/ContextField/Enum',
   'is!browser?WS.Data/ContextField/List'
], function(
   _const,
   Deferred,
   ParallelDeferred,
   RightsManager,
   ExtensionsManager
) {
   var resultDef = new ParallelDeferred( {stopOnFirstError:false, maxRunningCount:1 }); 

   if (!ExtensionsManager.extensionsLoaded()) {
      resultDef.push(ExtensionsManager.loadExtensions()); 
   }

   if (_const.rights) {
      var rights = RightsManager.getRights(); 
      if (rights instanceof Deferred) {
         resultDef.push(rights.addCallback(function (rights) {
            window.rights = rights; 
         })); 
      }
   }

   return resultDef.done().getResult(); 
}); 
