/**
 * Created by rn.kondakov on 10.07.2018.
 */
define('Core/HtmlJsonWrapper', [
   'Core/Control',
   'tmpl!Core/HtmlJsonWrapper'
], function(Control, template) {
   'use strict';

   return Control.extend({
      _template: template,
      json: null,
      setJson: function(json) {
         this._children.htmlJson._options.json = json;
         this._children.htmlJson._forceUpdate();
         this.json = json;
      },
      _afterMount: function(options) {
         if (typeof options.json !== 'undefined') {
            this.setJson(options.json);
         }
      },
      _beforeUpdate: function(newOptions) {
         if (typeof newOptions.json !== 'undefined') {
            this.setJson(newOptions.json);
         }
      }
   });
});
