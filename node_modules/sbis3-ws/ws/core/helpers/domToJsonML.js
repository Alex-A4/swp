/**
 * Created by rn.kondakov on 17.07.2018.
 */
define('Core/helpers/domToJsonML', function() {

   return function domToJsonML(dom) {

      if (dom.nodeType === 3) {
         return dom.nodeValue;
      }

      var jsonML = [dom.nodeName.toLowerCase()];

      if (dom.nodeType === 1 && dom.attributes.length > 0) {
         jsonML[1] = {};
         for (var j = 0; j < dom.attributes.length; j++) {
            var attribute = dom.attributes.item(j);
            jsonML[1][attribute.nodeName] = attribute.nodeValue;
         }
      }

      if (dom.hasChildNodes()) {
         for (var i = 0; i < dom.childNodes.length; i++) {
            var item = domToJsonML(dom.childNodes.item(i));
            jsonML.push(item);
         }
      }

      return jsonML;
   };

});
