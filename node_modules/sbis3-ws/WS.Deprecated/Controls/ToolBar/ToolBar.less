@import "../../index";

@classicHoverBackgroundColor: #E9FAFE;
@classicButtonBorderColor:    #587ab0;
@defaultHoverBackgroundColor: #FDECD9;
@transferColorHover:          #000;
@hoverColor:                  #ff7033;

@iconDown:  "\e673";
@iconUp:    "\e672";
.icon(@iconCode) {
   &:after {
      content: @iconCode;
      font-family: 'cbuc-icons' !important;
      position: absolute;
      top: 3px;
      left: 3px;
      font-size: 16px !important;
      line-height: 16px !important;
      width: 16px;
      height: 16px;
   }
}

.ws-toolbar-block {
   display: table;
   border-collapse: separate;//без этого свойства ie делает бордюр 0.5px
   .ws-item-toolbar {
      min-width: 16px;
      height: 24px;
      vertical-align: top;
      float: none !important;
   }
}

.ws-toolbar {
   overflow: hidden;
   line-height: 24px;
   -webkit-user-select: none;
   -khtml-user-select: none;
   -moz-user-select: -moz-none;
   -o-user-select: none;
   user-select: none;
   border-collapse: initial;

   .ws-button-caption {
      line-height: 22px;
   }

   .ws-item-toolbar {
      padding: 0 0 0 8px;
   }

   .ws-button-image-left.ws-enabled:hover {
      text-decoration: none; /*чтобы у иконки подчеркивание не отображалось при наведении*/
   }

   &.size-24px, &.transfer-style {
      .ws-item-toolbar {
         display: table-cell; //нужно, чтобы кнопки тулбара не переносились при нехватке места
         &.ws-toolbar-item-hide-caption .ws-button-caption {
            display: none;
         }
      }
   }

   .ws-toolbar-separator {
      padding-left: 8px;
      border-right: 2px solid @globalDefaultLabelColor !important;
      height: 20px;
   }

   &.size-24px {
      height: 24px !important;
      line-height: 24px;
      .ws-toolbar-block {
         margin-left: -8px;
      }
   }

   &.transfer-style {
      .ws-toolbar-block {
         margin-left: 0;
      }

      .ws-item-toolbar {
         padding: 0;
      }

      .ws-toolbar-separator {
         padding-left: 0;
      }

      .ws-toolbar__transfer-button-middle, .ws-toolbar__transfer-button-middle.ws-has-focus {
         border-radius: 0;
      }

      .ws-toolbar__transfer-button-first, .ws-toolbar__transfer-button-first.ws-has-focus {
         border-radius: 16px 0 0 16px;
      }
      .ws-toolbar__transfer-button-first, .ws-toolbar__transfer-button-middle {
         border-right: none;
      }

      .ws-toolbar__transfer-button-last, .ws-toolbar__transfer-button-last.ws-has-focus {
         border-radius: 0 16px 16px 0;
      }

      &.ws-disabled .ws-toolbar-menu-button-24px {
         background-position: 0 -216px;
         cursor: default;
      }
   }

   .button {
      white-space: nowrap;
   }

   &.top, &bottom {
      left: 0;
      right: 0;
      height: 22px;
   }

   &.right, &.left {
      background: @toolbarBackground url('resources/image/toolbar-h-bg.png') repeat-y top left;
      top: 0;
      bottom: 0;
      width: 22px;
   }

   &.right {
      padding-left: 2px;
   }

   &.left {
      padding-right: 2px;
   }

   &.ws-disabled .ws-toolbar-menu-button-24px {
      background-position: 0 -144px;
      cursor: default;
      border-color: @disabledButtonTextColor;
      &:hover {
         color: @disabledButtonTextColor;
      }
   }
}

.ws-toolbar-menu-button-24px {
   display: block;
   position: relative;
   width: 22px;
   height: 22px;
   cursor: pointer;
   border: 1px solid @classicButtonBorderColor;
   border-radius: 16px;
   .icon(@iconDown);
   &.transfer-style {
      border: none;
      &:hover {
         color: @transferColorHover;
      }
   }
   &:active{
      color: @hoverColor;
   }
   &.open {
      z-index: 9999;
      position: absolute;
      top: 3px;
      cursor: pointer;
      background: none;
      color: @classicButtonBorderColor;
      &.transfer-style {
         right: 10px;
      }
      &.short-style {
         right: 4px;
      }
      &:hover {
         border-color: @hoverColor;
         color: @hoverColor;
      }
      &:after {
         content: @iconUp;
      }
      &:active {
         color: @hoverColor;
      }
   }
}

.ws-button-link.ws-enabled:hover .ws-toolbar-menu-button-24px {
   border-color: @hoverColor;
}

.ws-toolbar-menu {
   height: auto;
   width: auto;
   position: absolute;
   cursor: default;
   background: none repeat scroll 0 0 @globalBGColor;
   display: block;

   &.item-height-32px {
      .ws-menu-item {
         height: 32px;
      }
      .ws-menu-image, .menu-span {
         margin-top: 4px;
      }
   }

   .transfer-style {
      right: 5px;
   }

   &.menu-left-turn { //Если меню повернуто влево
      .has-hide-menu-button {
         .ws-toolbar-menu-button-24px.open { //Прикрепляем кнопку скрытия меню в правый угол
            left: auto;
            right: 5px;
         }
         &.ws-menu-image-padding { //Расставляем паддинги для элементов с картинками и без них
            .ws-menu-item-without-image {
               padding: 0 32px 0 32px;
            }
            .ws-menu-hasImg {
               padding: 0 32px 0 4px;
            }
         }
      }
      .has-hide-menu-button .ws-menu-item-without-image { //Отступ слева, если нет иконок
         padding: 0 32px 0 4px;
      }
   }
   &.menu-top-turn { //Если меню повернуто вверх
      .has-hide-menu-button {
         .ws-toolbar-menu-button-24px.open { // - прикрепляем кнопку скрытия меню в нижний угол
            top: auto;
            bottom: 6px;
         }
      }
   }
}

.menu-ul {
   &.has-hide-menu-button { //Только если есть кнопка скрытия меню
      .ws-menu-item-without-image { //Отступ слева, если нет иконок
         padding: 0 4px 0 32px;
      }
      &.ws-menu-image-padding { //Если есть иконки, увеличиваем отступ
         .ws-menu-hasImg {
            padding: 0 4px 0 32px;
         }
         .ws-menu-item-without-image {
            padding: 0 4px 0 58px;
         }
      }
      .ws-toolbar-menu-button-24px.open { //В меню, открытом вправо прикрепляем кнопку скрытия в левый угол
         left: 4px;
         right: auto;
      }
      &.ws-menu-image-padding .ws-with-submenu, .ws-with-submenu { //Если в меню есть подменю, то добавляем правый паддинг
         padding-right: 24px;
      }
   }
}
