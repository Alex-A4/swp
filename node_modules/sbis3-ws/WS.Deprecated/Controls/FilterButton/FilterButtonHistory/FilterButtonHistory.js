/**
 * Created by am.gerasimov on 20.07.2015.
 */
define('Deprecated/Controls/FilterButton/FilterButtonHistory/FilterButtonHistory', [
   'Core/helpers/String/escapeHtml',
   'Lib/Control/CompoundControl/CompoundControl',
   'html!Deprecated/Controls/FilterButton/FilterButtonHistory/FilterButtonHistory',
   'Lib/Control/TemplatedArea/TemplatedArea',
   'Deprecated/Controls/CustomView/CustomView',
   'i18n!Deprecated/Controls/FilterButton/FilterButtonHistory/FilterButtonHistory'
], function(
   escapeHtml,
   CompoundControl,
   dotTplFn
) {
   /**
       * SBIS3.FilterButtonHistory
       * @class SBIS3.FilterButtonHistory
       * @extends Lib/Control/CompoundControl/CompoundControl
       * @control
       * @deprecated Используйте класс {@link SBIS3.CONTROLS/Filter/Button}.
       */
   var FilterButtonArea = CompoundControl.extend(/** @lends SBIS3.FilterButtonHistory.prototype */{
      _dotTplFn: dotTplFn,
      $protected: {
         _options: {

         }
      },
      $constructor: function() {
      },

      init: function() {
         FilterButtonArea.superclass.init.call(this);
      },
      _displayValue: function(record) {
         if (record) {
            var isRemembered = record.get('isRemembered'),
               value = escapeHtml(record.get('request'));

            return $(['<div class="ws-FilterButton__request',
               (isRemembered ? ' ws-FilterButton__request-remembered' : ''),
               '" title="',
               value,
               '">',
               '<span class="ws-FilterButton__historyIcon icon-16',
               (isRemembered ? ' icon-Pin icon-primary' : ''),
               '" title="',
               (isRemembered ? rk('Зафиксирован') : rk('Зафиксировать')),
               '"></span>',
               '<div class="ws-FilterButton__requestContainer"><span class="ws-FilterButton__requestText asLink">',
               value,
               '</span>',
               '<div class="ws-FilterButton__helper"></div></div>',
               '</div>'].join(''));
         }
      }
   });

   return FilterButtonArea;
});