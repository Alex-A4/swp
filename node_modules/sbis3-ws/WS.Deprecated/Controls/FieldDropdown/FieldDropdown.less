@import "../../index";

@dropdownBorderColor: #E4E4E4;
@dropdownHoveredOptionBGColor: #F0F5FB;
@dropdownSubColor: #999999;
@dropdownSubFontSize: 12px;
@dropdownCurrentBorderColor: #EAEAEA;
@roundingImage: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAUCAMAAACDMFxkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA0ppVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkFGNjE0MEUyOTQ3MTFFNTg2M0NCNDI5RkRDRUM2NzMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkFGNjE0MEQyOTQ3MTFFNTg2M0NCNDI5RkRDRUM2NzMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoyYjc3ZmU1YS0yOTQ3LTExZTUtYmRmYi1hNmYwYmRiMWI1ODIiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoyYjc3ZmU1YS0yOTQ3LTExZTUtYmRmYi1hNmYwYmRiMWI1ODIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz77U6ynAAAAGFBMVEX////k5OPp6ejx8fH9/f319fTu7u3///+TJ84QAAAACHRSTlP/////////AN6DvVkAAABHSURBVHjajM47DoAwDATRWX+S+98Y2SEgpUBM9QprZQBpVpyMTZNvpuSxyFDVJO3hV70++/JkvHTZYriU/Us1uGnJny4BBgDVGAGktvE+1gAAAABJRU5ErkJggg==');

/**
 Выпадающий список
 */

// функция установки стилей для селекта
.custom-select-style() {

   padding: 0 4px;

   &-text {
      margin: 0 16px 0 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      min-height: 22px;
      line-height: 22px;
   }

}

/* наши опции для селектов */
.custom-select-option {

   padding: 4px;
   white-space: nowrap;
   text-overflow: ellipsis;
   overflow-x: hidden;

   &-hover{
      background-color: @dropdownHoveredOptionBGColor;
      cursor: pointer;
   }

   &.ws-field-dropdown-current{
      border-bottom: 1px solid @dropdownCurrentBorderColor;
      padding: 4px 8px 2px 4px;
      background-color: transparent !important;
   }

}

/* декоративные стреки */
.custom-select-arrow {

   height : 100% !important;
   width : 14px;
   background: url("@{globalImagesPath}select-arrow.png") -2px 0 no-repeat;
   position: absolute;
   right: 3px;
   top: 0;

   &.custom-select-arrow-hover {
      background: none;
      padding-top: 2px;
   }

   &-open {
      background-position: -2px -24px;
      &.custom-select-arrow-hover {
         background: none;
         padding-top: 4px;
         &.icon-hover {
            color : @globalControlsHoverColor !important;
         }
      }
   }

}

/* контейнер контрола */
.ws-field-dropdown-container {

   max-height: 24px;
   color: #000;
   font: @globalDefaultFontSize @globalFontFamily;
   text-align: left;

   // стили для упрощенного рендера (типа ссылки)
   &.ws-field-dropdown-simple {

      .ws-field-dropdown {

         border: none;
         background-color: transparent;

         .custom-select {

            padding: none;
            &-arrow { display:none; }
            &-text {
               color: inherit;
               margin: 0;
            }

         }

      }

      &.ws-disabled {
         & .custom-select,
         & .dropdown-fake {
            &-text,
            &:hover {
               color: rgb(0, 0, 0) !important;
               text-decoration: none !important;
               cursor: default;
            }
         }
      }

      .ws-editAtPlace { padding: 0 4px 1px 4px; }

   }

   // стили для hover рендера
   &.ws-field-dropdown-hover {

      .ws-native-select {
         display: none;
      }

      .ws-field-dropdown {

         &, &:hover { border: 1px solid transparent; }
         .custom-select-arrow {
            right: auto;
            padding-left: 1px;
            left: 0px;
         }
         .custom-select-text { margin: 0 0 0 12px !important; }

      }

      &.ws-mobile {
         .ws-native-select {
            visibility: hidden;
         }
      }

   }

   // стандартные стили
   &.ws-disabled {
      > .ws-field-dropdown {
         .custom-select-arrow { background: none; }
      }
      .ws-native-select { color: #000000; }
   }

   .ws-field-dropdown {

      &:hover {
         .custom-select-arrow {
            background-position: -2px -24px;
            &.custom-select-arrow-hover {
               background-position: -2px -50px;
            }
         }
      }

      // нативный инпут-селект
      .ws-native-select {
         border: 0 none;
         height: 0;
         margin-top: -1px;
         opacity: 0;
         position: absolute;
         vertical-align: middle;
         left: 0;
         max-height: 24px;
         z-index: -1; //chrome 58 фокус при клике переходит в нативны селект, не смотря на его размеры (100 x 0 )
      }

      // наш собственный селект
      .custom-select {
         .custom-select-style();
      }

      // имитация проинициализированного дропдауна
      .dropdown-fake {
         ~ * { display: none; }
         .custom-select-style();
      }

   } // .ws-field-dropdown

} // .ws-field-dropdown-container



/*
   контейнер для списка элементов (options), который дублирует их
   из нативного селекта
*/
.custom-options-container {

   cursor: pointer;
   position: absolute;
   margin-left: -1px;
   max-width: 650px;
   overflow-x: hidden;
   &-head {

      display: none;
      border: 1px solid @dropdownBorderColor;
      background-color: #fff;
      position: relative;
      border-bottom: none;
      z-index: 2;

      &.custom-options-container-head-reversed {
         border-bottom: 1px solid @dropdownBorderColor;
         border-top: none;
      }

      .custom-select-option {
         margin: 0 0 0 12px;
         display: inline-block;
         &.ws-field-dropdown-current {
            border-bottom: none;
            color: @globalControlsHoverColor;
         }
      }

      .custom-select-arrow {
         right: auto;
         left: 1px;
         height: 24px !important;
      }

   }
  //Перестилизация выпадающих списков
   &-hover, &-simple {

      .custom-options-container-list {
         border: 2px solid @dropdownBorderColor;
      }

      .custom-options-container-head {
         border-radius: 5px 5px 0 0;
         border: 2px solid @dropdownBorderColor;
         border-bottom: none;
      }
   }
   &-hover {

      padding: 0 3px 10px 5px;
      overflow: visible !important;

      .custom-options-container-head {
         .custom-select-option{
            &.ws-field-dropdown-current {
               max-width: 920px;
            }
         }
      }

      .custom-options-container-list {

         margin-top: -2px;
         padding: 4px 0;
         border-radius: 0 5px 5px 5px;

         .ws-field-checkbox .ws-field {
            padding: 0 !important;
         }

         & [value='default']{
            font-weight: bold;
            text-decoration: none;
            color:black;
         }

         .custom-select-option {

            font-size: 15px;
            padding-left: 16px;
            padding-right: 16px;

            &.ws-PathFilter-checkbox {
               padding-left: 0;
            }

         }

      }

      .custom-options-container-head-rounding {
        width: 10px;
        height: 7px;
        display: inline-block;
        background: transparent @roundingImage;
        position: absolute;
        bottom: 0px;
        right: -7px;
      }

      &.custom-options-container-left-turn {

         .custom-options-container-list {
            border-radius: 5px 0 5px 5px;

            .ws-field-checkbox {
               .ws-field {
                  div.box {
                     float: right !important;
                  }
               }
            }

            .ws-PathFilter-dropdown-head {
               & > div {
                  padding: 0 24px 0 0;
               }
            }
            .custom-select-option {
               text-align: right;

               &.ws-PathFilter-checkbox {
                  padding-right: 0;
                  padding-left: 16px;
               }
            }
         }

         .custom-options-container-footer {
            .ws-select-button {
               right: 64px;
               left: auto;
            }
            .ws-more-button {
               right: 24px;
            }
         }

        .custom-options-container-head-rounding {
          background: transparent @roundingImage 0 10px;
          left: -8px;
        }
      }

      &.custom-options-container-widthEquals {

         .custom-options-container-list {
          border-radius: 0 0 5px 5px;
        }

         .custom-options-container-head-rounding {
          display: none;
        }
      }

      .custom-options-container-head { display: inline-block; }
   }

   &-simple {
      .custom-options-container-list {
         border-radius: 5px;
      }
      & > .ws-custom-options-border div:first-child {
         border-bottom: none;
         &:hover {
            background-color: transparent;
         }
      }
   }

   &-list {

      border: 1px solid @dropdownBorderColor;
      background-color: #fff;
      overflow-y: auto;
      max-height: 312px;
      z-index: 1;

      .custom-select-option {

         &.ws-field-dropdown-empty {
            color: @globalPlaceholderColor;
         }

      }

   }

} // .custom-options-container


.ws-is-ie .ws-field-dropdown-simple .custom-select-text{
   padding-top: 1px;
}

/*
   непонятные классы, не смог найти их использование,
   но пока оставлю, чтоб ничего не поломать
*/
.options-show { background-color: #F0EBCC; }
.ws-dropdown-sub-text {
   color: @dropdownSubColor;
   font-size: @dropdownSubFontSize;
}
//Убираем нативный селект на MacOS
.ws-is-desktop-safari {
   .ws-field-dropdown-container {
      .ws-native-select {
         display: none;
      }
   }
}

