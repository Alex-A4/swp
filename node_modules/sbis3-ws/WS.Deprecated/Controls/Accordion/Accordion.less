@import "../../index";

/**
 * Аккордеон
 */
@accordionGroupBackground        : #fbfbfb;                                      //Бэкграунд группы
@accordionGroupActiveBackground  : #f7f3f0;                                      //Бэкграунд активной группы
@accordionGroupHoverBackground   : #f7f3f0;                                      //Бэкграунд наведенной группы
@accordionBorderWidth            : 0;                                            //Ширина бордера
@accordionBorderColor            : #ebe8e5;                                      //Цвет бордера аккордеона
@accordionLabelFont              : 18px @globalFontFamily;                       //Шрифт заголовка аккордеона
@accordionLabelColor             : #999;                                         //Цвет шрифта заголовка аккордеона
@accordionLabelActiveColor       : #000000;                                      //Цвет шрифта активного заголовка аккордеона
@accordionLabelDisabledColor     : #B0B0B0;                                      //Цвет шрифта недоступного заголовка аккордеона
@accordionToolbarFont            : normal normal @globalDefaultFontSize @globalFontFamily;//Шрифт кнопок аккордеонного тулбара
@accordionToolbarFontColor       : #000;                                         //Цвет шрифта кнопок аккордеонного тулбара
@accordionAsLinkFontColor        : #000;                                         //Цвет шрифта кнопок-ссылок в аккордеоне

.ws-label-disabled > .ws-accordion-element-title{
   color: #979797 !important;
   cursor: auto;
}

.ws-accordion{
   border: none;
   background: transparent;
   border-top: @accordionBorderWidth solid @accordionBorderColor;
   padding-bottom: 8px;//Учитываем тень от нижнего элемента. padding тут затем, чтобы эта тень была
                       //по внутреннему фону аккондеона, а не по внешнему, чтоб зазора не было, если есть что-то под аккордеоном
   font: @accordionLabelFont;
   color: @accordionLabelActiveColor;

  .box-sizing(border-box);

   ul{
      list-style: none;
      margin: 0;
      padding: 0;
   }

   .ws-accordion-element-area {
      width: 100%;
      overflow: hidden;
   }

   .ws-accordion-active{
      background: url('resources/images/menu-button-bg.png') repeat-x #D3DCE5 !important;
   }

   .ws-accordion-element-title {
      background: url("resources/images/menu-bg.png") repeat-x scroll left top #BAC6C0;
      display: block;
      height: 30px;
      line-height: 30px;
      padding: 0 20px 0 5px;
      cursor: pointer;
      overflow: hidden;
      position: relative;
      white-space: nowrap;

      &:hover {
         background: url('resources/images/menu-button-bg.png') repeat-x #D3DCE5  ;
      }
   }

   .ws-accordion-wr{
      border-style: solid;
      border-width: 0 @accordionBorderWidth;
      border-color: @accordionBorderColor;
      background: @accordionGroupBackground;

      .ws-accordion-element-title{
         font: inherit;
         color: @accordionLabelColor;
         background: transparent;
         height:auto;
         line-height: 17px;
         padding: 12px 16px;
         border-bottom: @accordionBorderWidth solid @accordionBorderColor;
         min-height: 16px;

         &.ws-dbl-line{
            line-height: 18px !important;
            white-space: normal;
         }

         .ws-accordion-arrow{
            float: right;
            height: 100%;
            width: 15px;
            margin-right: -15px;
            background: transparent url("resources/images/accordion-arrow-right.png") center center no-repeat;
            display: none;
         }

         &.ws-accordion-active{
            border: none;
            background: @accordionGroupActiveBackground !important;
            color: inherit;

            &>.ws-accordion-arrow {
               background-image: url("resources/images/accordion-arrow-down.png");
            }
         }
      }

      .ws-accordion-element-area {
         background: @accordionGroupActiveBackground;
         border-bottom: @accordionBorderWidth solid @accordionBorderColor;
         .asLink {
            color : @accordionAsLinkFontColor;
         }
      }

      &.ws-accordion-wrapper-active{
         background: @accordionGroupActiveBackground;

         .ws-accordion-element-area{
            padding-bottom: 6px;
         }
      }

      &.ws-accordion-wr-hover{
         background: @accordionGroupHoverBackground;

         &>.ws-accordion-element-title,
         &>.ws-accordion-element-title.ws-accordion-active.ws-accordion-has-handlers{
            cursor: pointer;
            text-decoration: underline;
         }

         &>.ws-accordion-element-title.ws-accordion-active,
         &.ws-label-disabled>.ws-accordion-element-title{
            text-decoration: none;
            cursor: auto;

            &:hover {
               background: url("resources/images/menu-bg.png") repeat-x scroll left top #BAC6C0;
            }
         }
      }

      &.ws-label-disabled{
         background: @accordionGroupBackground;

         &>.ws-accordion-element-title{
            color: @accordionLabelDisabledColor;
            cursor: auto;
         }

         &:hover{
            background: @accordionGroupBackground !important;
         }
      }
   }
   .ws-has-focus > div > .asLink{
      outline: none !important;
      overflow : hidden;
      -o-text-overflow: ellipsis;
      text-overflow: ellipsis;
   }
}

.ws-accordion-shadow{
   height: 12px;
   left: 0;
   position: absolute;
   right: 0;
   overflow: hidden;
   background: url("@{globalImagesPath}acc_shadow.png") no-repeat;
   z-index: 5;
   width: 230px;
}

.ws-accordion-element-img {
   margin-right: 4px;
   vertical-align: middle;
}


.ws-accordion-marker{
   display: none;
}

.ws-accordion-area {
   width: auto !important;
   height: 100% !important;
   background-color: transparent !important;
}

/**
 * Аккордеонный тулбар
 */
.ws-accordion-toolbar{
   padding: 7px 5px !important;
   right: 0;
   position: absolute;
   height: auto !important;
   left: auto !important;
   border: none !important;

   .ws-toolbar-block{
      position: relative;
      height: 24px;
      line-height: 24px;
   }

   &.ws-toolbar{
      background: none no-repeat transparent !important;
      border: none !important;
      height: 25px !important;

      & button {
         height : 22px !important;
      }

      & button div {
         float:left;
      }

      .btn{
         &:active{
            box-shadow: inset 1px 1px 1px #ccc;
            border-width: 0 !important;
            .box-shadow(none)
         }
         &.classic{
            &:hover{
               border-color: #808285 !important;
            }
            &:active{
               border-color: #a6a8aa #e1e2e3 #e1e2e3 #a6a8aa !important;
            }
         }
      }

      .ws-field-button-element.classic{
         border-radius: 3px;
         font: @accordionToolbarFont;
         box-shadow: none !important;
         color : #333;
         overflow : hidden;
         -o-text-overflow: ellipsis;
         text-overflow: ellipsis;

         &, .ws-window-titlebar-action{
            border-width: 1px !important;
            border-style: solid;
            border-color: #e1e2e3 #a6a8aa #a6a8aa #e1e2e3 !important;
            background: transparent !important
         }
      }

      .ws-field-button{
         background: none transparent !important;
         padding: 0 2px;
         height: 100% !important;
         vertical-align: middle;
         width: auto !important;
      }

      div, span{
         height: 100% !important;
      }

      .ws-button{
         line-height: 1;
         height: auto !important;
         vertical-align: middle;
      }
   }

   .classic,
   .asLink{
      color : @accordionToolbarFontColor;
      font: @accordionToolbarFont;
   }

   .asLink{
      text-decoration: none;

      &:hover{
         text-decoration: underline;
      }
   }

   .ws-field-button img{
      margin: 0 3px;
      vertical-align: middle;
   }
}

/**
 * Аккордеонный браузер
 */
.ws-accordion{
   .ws-accordion-element-title.ws-accordion-active{
      margin-bottom: -6px;
   }
   .ws-browser-container-wrapper-zebra {
      border: 0 none;
   }
   .ws-browser{
      font-style: normal;
      color: #000;

      tbody tr.rE.ws-browser-table-row > .ws-browser-cell,
      &.ws-browser-hasZebra{
         tbody tr.ws-browser-table-row:last-child > .ws-browser-cell,
         tbody tr.ws-browser-table-row[rowgroup] > td:first-child,
         tbody tr.ws-browser-table-row > td
         {
            border: 0 none !important;
         }


      }

      &.ws-browser-active-hover {
         tr.ws-browser-item-over.ws-browser-table-row.rE {
            background: none !important;
         }
      }

      tbody{
         tr.ws-browser-table-row > .ws-browser-cell{
            border: none !important;
         }

         tr, tr.tE{
            background: none repeat scroll 0 0 transparent !important;
         }
         tr.ws-browser-table-row{
            &,
            &:hover,
            &.hover,
            &:hover > .ws-browser-cell,
            &.hover > .ws-browser-cell,
            & .ws-browser-cell:first-child, &.ws-browser-row-selected > td{
               background: none repeat scroll 0 0 transparent !important;
               padding: 0;
            }

            &[treelevel="0"]{
               .ws-browser-cell-container{
                  padding-left: 8px !important;

                  .ws-browser-text-container{
                     padding-left: 8px;
                  }
               }
            }
            &[treelevel="2"] > td:first-child {
               .ws-browser-cell-container{
                  padding-left: 48px !important;
               }
            }

            .ws-browser-cell{
               border: none !important;

               .ws-browser-cell-container{
                  padding: 6px 16px;
               }
            }
         }

         .ws-browser-cell-container{
            padding: 6px 16px;
            line-height: 16px;
            min-height: 16px;
            font-size: @globalDefaultFontSize;
            border: none;
            height: auto;
         }

         .ws-browser-text-container{
            padding-top: 0;
            margin-left: 0 !important;
            line-height: 17px;

            &:hover{
               text-decoration: underline;

               a:hover{
                  text-decoration: none;
               }
            }
         }
      }

      .ws-browser-item-over{
         background-color: transparent !important;
         color: inherit !important;
         .box-shadow(none);
      }

      .ws-browser-expander-container{
         display: none;
      }
   }

   .ws-browser-container{
      background-color: @accordionGroupActiveBackground;
   }

   .ws-browser-data-container{
      border: none;
   }

   .ws-browser-toolbar{
      .ws-toolbar{
         background-color: #F5F3E8 !important;
         .ws-toolbar-block {
            float:right;
            padding-right: 5px;
         }
      }
      button {
         background-position: center center !important;
      }
   }

   .ws-browser-row-selection{
      background-color: transparent ! important;
   }

   .ws-browser-icon{
      width:16px;
      height:16px;
      float:left;
      background:transparent url('resources/images/tree_icons.gif') no-repeat;
      &.open,
      &.close{
         display: none;
      }
   }

   .ws-browser-ajax-loader{
      position:absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      width:  100%;
      height: 100%;
      z-index: 1;
      background:#fff;
      filter: ~"alpha(opacity = 40)";
      display: none;
   }
}

@-moz-document url-prefix(){
   .ws-accordion-toolbar.ws-toolbar .ws-field-button{
      padding : 0;
   }
}

