@import "../../index";

@fieldNormalBorderColor: #eaeaea;
@fieldDisabledBorderColor: #f5f5f5;
@fieldHoverBottomBorderColor: #aab0c1;
@ie8: \0screen;
@ie8andHigher: screen\0;
input, select, textarea, button{
  text-align: inherit;
  font-family:inherit;
  font-size: 100%;
}
input[disabled]{
   -webkit-opacity: 1;
   -webkit-text-fill-color: inherit;
}

.ws-disabled > .ws-field input,
.ws-disabled > .ws-field select,
.ws-disabled > .ws-field textarea {
  background-color:#ECE9D8;
}
.input-field em.vis-hide{
  color: transparent;
}
.ws-field .input-field{
  font-family:'TensorFont', sans-serif;
  outline: none !important;
  cursor: text;
  overflow:hidden;
  white-space: nowrap;
}
.ws-field-format .input-field,
.ws-field-date .input-field
{
  overflow:visible;
  padding: 2px;
}
.ws-formatfield-temp{
  visibility: hidden;
  position: absolute;
}

.ws-field em{
  font-style: normal;
  font-weight:normal;
}
/* valign for Label */
.ws-field-label label,
.ws-field-binding-left label,
.ws-field-binding-top label{
  display: block;
  vertical-align: top;
  overflow: hidden;
  text-overflow: ellipsis;
}

.ws-field-valign-top label {
  vertical-align: top;
}
.ws-field-valign-center label {
  vertical-align: middle;
}

.ws-field-valign-bottom label {
  vertical-align: bottom;
}
.ws-field-label {
  overflow: visible;
  label span {
    font-size: @globalDefaultFontSize;
    font-family: @globalFontFamily;
    color: #999999;
    font-style: normal;
    font-weight: normal;
    vertical-align: middle;
    height: 100%;
    display: block;
  }
}

.input-text-field, .input-string-field{
  border: 0;
  font-family:'TensorFont', sans-serif;
  /*height: 12px;*/
  outline:none;
  cursor: text;
  overflow:hidden;
  white-space: nowrap;
  width:100%;
  text-align:inherit;
  padding-left: 0;
  margin: 0;
  /*padding: 0;*/
  vertical-align: baseline;

   //https://stackoverflow.com/questions/38663578/how-to-hide-autofill-safari-icon-in-input-field
   &::-webkit-contacts-auto-fill-button {
      display: none !important;
      visibility: hidden;
      position: absolute;
      right: 0;
      pointer-events: none;
   }
}
.ws-field-numeric .ws-field, .ws-field-string .ws-field{
  padding: 0 2px;
}

/*
 Простые текстовые поля
*/
.ws-field{
   padding: 1px 3px;
   background-color: #fff;
   display: block;
   position:relative;
   overflow: hidden;
   &, &.ws-field-dropdown{
      border: 1px solid transparent;
      border-bottom-color: @fieldNormalBorderColor;
   }
   input,
   textarea{
      font: inherit;
      color: inherit;
      text-align: inherit;
     .placeholder();
   }
   input{
      padding: 0 1px 0 0;
   }
   &.ws-field-fullheight{
      border: 1px solid @fieldNormalBorderColor;
   }
}

.input-field {
   em {
      font: inherit;
      color: inherit;
      text-align: inherit;
      line-height: 1;
   }
   &.input-pasting > * {
      visibility: hidden;
   }
}

.readonly{
   &.ws-field-fullheight-has-scrollbar>.ws-field.ws-field-fullheight {
      &, &:hover{
         border: 1px solid @fieldDisabledBorderColor;
      }
   }

   &>.ws-field.ws-field-fullheight {
      &, &:hover {
         border: 1px solid transparent;
      }
   }
}

.ws-field-date .ws-field{
   //Ввостанавливаем базовую линию, с overflow: hidden; она ломается
   overflow: visible !important;
   padding: 0 4px;
   height: 22px;
   float: left;
   .ws-caption &,
   .ws-caption&{
      height: 25px;
   }
}
.ws-field-text .ws-field,
.ws-field-format .ws-field/*,
.ws-field-dropdown.ws-field*/{
  padding: 0 4px;
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
}

.ws-field-dropdown.ws-field{
   padding: 0;
   cursor: pointer;
   text-align: inherit;
}
.ws-disabled .ws-field-dropdown.ws-field,
.ws-disabled .ws-field-dropdown+.ws-editAtPlace {
  cursor: default !important;
}

.ws-field-checkbox .ws-field,
.ws-field-format .ws-field{
   left: 0;
   right: 0;
   top: 0;
   bottom: 0;
}
//стили для всего, кроме ie8
.ws-field-format .ws-field{
   position: absolute;
}

html:not([lang*=""]) {
   .ws-field-string,
   .ws-field-numeric{
      .ws-field{
         padding: 0 4px;
      }
   }

   .ws-field-format,
   .ws-field-date{
      .input-field{
         font: inherit;
      }
   }
}
//хак для opera
x:-o-prefocus, .ws-field-format .input-field{
   padding: 0 !important;
}

//стили для корректировки положения метки и FieldDate
//избавляемся от vertical-align:middle
//из-за того что оно вносит погрешность 1 пиксель между браузерами
//критично только внутри метки

.ws-Label-ws-control > .ws-Label-content > .ws-field-date .input-field{
   vertical-align: top;
}

.ws-Label-ws-control > .ws-Label-content > .ws-field-date .input-field em{
   vertical-align: top;
   position: relative;
   top: 4px;
}

.ws-field-string,
.ws-field-numeric,
.ws-field-format,
.ws-field-date,
.ws-field-text{
   position: relative;
   height: 24px;
   color: @globalDefaultColor;
   font: @globalDefaultFontSize @globalFontFamily;
   &.ws-field-text-autosize {
      height: auto;
   }
}

// новый джин
.ws-field-string, .ws-field-dropdown-container {
  position: relative;
  //width:170px; не надо устанавливать тут ширину, проблема с выпадающими списками браузера
  height:24px;
  // три параметра выше перекроются джином старым
  display: inline-block;
}

.ws-field-string,
.ws-field-numeric{

   .input-string-field,
   .input-text-field{
      font: inherit;
      color: inherit;
      text-align: inherit;
      vertical-align: baseline;
      height: 100%;
      text-overflow: ellipsis;
   }

   .ws-field{
      padding: 0 4px;
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      line-height: inherit !important;
   }
}

.ws-field-format,
.ws-field-date{
   .input-field{
      padding: 1px 0 0;
      display: inline-block;
      vertical-align: middle;
   }
}

@-moz-document url-prefix() {
   .ws-field-format,
   .ws-field-date {
      .input-field {
         vertical-align: baseline;
      }
   }
}

.ws-field:hover,
.ws-field-dropdown:hover,
.ws-has-focus > .ws-field,
.ws-has-focus > .ws-field:hover,
.ws-has-focus > .ws-field input,
.ws-has-focus > .ws-field .ws-native-select,
.ws-has-focus > .ws-field textarea{
   border-color: @fieldNormalBorderColor;
   border-bottom-color: @fieldHoverBottomBorderColor;
}

.ws-disabled, .readonly{
   &>.ws-field,
   &>.ws-field:hover,
   &>.ws-field input,
   &>.ws-field .ws-native-select,
   &>.ws-field textarea{
      border-top-color: transparent;
      border-left-color: transparent;
      border-right-color: transparent;
      border-bottom-color: transparent;
      background: transparent;
   }
}

.ws-validation-error{
   & > .ws-field,
   & > .ws-field:hover,
   & > .ws-browser-data-container,
   & > .ws-field.ws-field-dropdown,
   & > .ws-field.ws-field-dropdown:hover,
   & > .ws-date-range-input-block,
   & > .ws-field-label.ws-field,
   &.ws-has-focus > .ws-field.ws-field-dropdown{
     border: 1px solid @fieldValidationErrorBorderColor !important;
   }
  @media @ie8andHigher {
     &.ws-has-focus > .ws-field.ws-field-dropdown {
        outline: 0px solid @fieldValidationErrorBorderColor !important;
     }
    .ws-validation-error > .ws-field-label.ws-field {
      border: 1px solid @fieldValidationErrorBorderColor !important;
    }
  }
   & > .ws-field,
   & > .ws-field .input-string-field,
   & > .ws-field .input-text-field,
   & > .input-string-field,
   & > .input-text-field,
   .ws-editAtPlace{
      background-color: @fieldValidationErrorBackgroundColor !important;
   }
   .ws-editAtPlace{
      outline: 1px solid #ff302b;
      outline-offset: -1px;
   }
   &.ws-field-checkbox .ws-field,
   & > .ws-field.ws-field-label{
      background-color: transparent!important;
   }
   & > .ws-field-label .input-field,
   &.ws-field-checkbox label{
      color: @fieldValidationErrorBorderColor !important;
   }
}

/**
 Метка
 */

.ws-field-label{
  background-color: transparent !important;
  font: inherit !important;
  color: inherit !important;
  .input-field {
    overflow: visible;
    white-space: normal;
    font: inherit !important;
    color: inherit !important;
  }
}

.ws-field.ws-field-label,
.ws-field.ws-field-label span{
   line-height: 1.231em;
   overflow: hidden;
   text-overflow: ellipsis;
   white-space: nowrap;
   padding: 0;
}
.ws-field.ws-field-label .ws-field-label-multiline,
.ws-field.ws-field-label .ws-field-label-multiline span{
   white-space: normal;
}

.ws-art-helper-legend-positioner{
   font-size: @globalDefaultFontSize;
   font-family: @globalFontFamily;
   color: @globalDefaultLabelColor !important;
}
.ws-field-label{
   label{
     border-top: 1px solid transparent;

      span{
         font-size: @globalDefaultFontSize;
         font-family: @globalFontFamily;
         color: @globalDefaultLabelColor;
         font-style: normal;
         font-weight: normal;
         vertical-align: middle;
         display: block;
         height: 100%;
      }
   }
   &.ws-field-binding-top label{
      margin-top: -4px;
      border: none;
   }
   &.ws-field{
      border: 1px solid transparent !important;
      border-left-width: 0 !important;

      div.input-field{
         text-overflow: ellipsis;
         overflow: hidden;
         width: 100%;
      }
   }
}

.ws-labeled-control{
   &.ws-labeled-control-fieldlabel{
     .ws-field-label.ws-field-binding-left{
       label{
         span{
           line-height: 1.2em !important;
           height: auto;

           .ws-baseline-align{
             line-height: 1.2em;
           }
         }
       }
     }
   }
   .ws-field-label.ws-field-binding-left{
      label{
         top: 0;
         bottom: 0;
      }

      .ws-baseline-align{
         border-left: 1px solid transparent;
         font-size: @globalDefaultFontSize;
         margin-right: -1px;
      }
   }
   /* метка для флага */
   &.bind-for-checkbox{
      .ws-field-label.ws-field-binding-left{
         padding-top: 4px;
      }
      .ws-field-checkbox.ws-checkbox-left{
         margin-left: -6px;
      }
   }
}
/*************************/
/**
 * Поле данных
 */
.ws-field-label{
   &.ws-field, &.ws-field span{
      line-height: 1.2em;
      min-height: 18px;
   }
   div.input-field{
      color: #000;
      font-size: @globalDefaultFontSize;
   }
}
/**
 Textarea
 */
.ws-field-text .ws-field {
   position: absolute;
   left: 0;
   top: 0;
   right: 0;
   bottom: 0;
   height: auto;
   &.ws-field-fullheight {
      padding-top: 1px;
      padding-bottom: 1px;
   }
}

.ws-tooltip-container,
.ws-dropdown-placeholder{
   color : @globalPlaceholderColor !important;
   font: inherit;
   text-align: inherit;
}
.ws-tooltip-container{
   left: 0;
   position: absolute;
   top: 0;
   box-sizing: border-box;
   padding-right: 5px;
   width: 100%;
   padding-top: 3px;
   text-overflow: ellipsis;
   overflow: hidden;
   -ms-text-overflow: ellipsis;
   white-space: nowrap;
}
.calendar-container {

   display: inline-block;
   background: url("@{globalImagesPath}calendar.png") center center no-repeat;
   border-width: 0;
   margin : 0;
   cursor: pointer;
   width: 24px;
   min-height: 16px;
   max-height: 24px;
   height: 100%;
   &:hover{ background-image: url("@{globalImagesPath}calendar-hover.png"); }
   &:active{ background-image: url("@{globalImagesPath}calendar-active.png"); }
   &.calendar-disabled {
     background-image: url("@{globalImagesPath}calendar-disabled.png");
     cursor: default;
   }

}

.ws-calendar-disabled .ui-datepicker-header{
  background-color: #cccccc;
  background-image: none;
  border-color: #999999;
}

.ws-field-date-arrow{
   margin: 4px 0;
}

.ws-date-button{
   width: 16px;
   height: 16px;
   background: transparent url('@{globalImagesPath}arrows.png') no-repeat;
}
.ws-date-button-enabled{
   cursor: pointer;
}
.ws-date-button-left{
   float: left;
}
.ws-date-button-right{
   float: right;
   background-position: -16px 0;
}
.ws-date-button-left:hover{
   background-position: 0 -16px;
}
.ws-date-button-right:hover{
   background-position: -16px -16px;
}
.ws-date-button-left.ws-date-button-disabled{
   background-position: 0 -32px;
}
.ws-date-button-right.ws-date-button-disabled{
   background-position: -16px -32px;
}

// Стили для полей ввода с режимом редактирования по месту
.ws-field-underline {
   cursor: pointer;
   &.readonly,
   &.ws-disabled {
      cursor: inherit;

   }
   &.ws-editAtPlace-autowidth {
      width: auto !important;
   }
}
.ws-editAtPlace {
   &.editAtPlace-empty {
      color: #CCCCCC !important;
   }
   background: url("../FieldEditAtPlace/@{globalImagesPath}underline.png") bottom left repeat-x;
   .readonly &,
   .ws-disabled &{
      background: none;
   }
   padding: 1px 5px;
   display: block;
   .ws-editAtPlace-inner {
      display: block;
      height: auto;
      overflow: hidden;
      text-overflow: ellipsis;
      color: inherit;
      font: inherit;
      text-align: inherit;
      line-height: inherit;
      vertical-align: middle;
      white-space: nowrap;
   }
}
@-moz-document url-prefix() {
   .ws-field {
      input, textarea, .input-string-data-review {
         margin-left: -1px;
      }
   }
   .ws-field-string {
      .ws-editAtPlace {
         .ws-editAtPlace-inner {
            margin-left: -1px;
            padding-right: 1px; //MF округляет ширину в меньшую сторону, и при overflow: hidden, обрезается 1px текста в конце строки
         }
      }
   }
}

.ws-field-string {
   .input-string-data-review {
      line-height: 22px;
      height: 100%;
      width: 100%;
      white-space: pre-wrap;
      text-overflow: ellipsis;
      overflow: hidden;
   }
}
.ws-field-numeric {
  text-align: right;
}

.ws-field-date{
   white-space: nowrap;
}
.ws-field-date .ws-field{
   display: inline-block;
   zoom: 1;
}
.ws-field-date .ws-errorMessage{
   float: left;
   margin-left: -19px;
   position: relative;
}
@media @ie8andHigher {
  .navigation-leftNavigationEdit__renameField > .ws-field > .input-string-field {
    line-height: 0;
  }
}
.ws-caption .ws-editAtPlace {
   font: bold 18px 'TensorFont', sans-serif;
   text-decoration: none;
   color: #000;
}

input::-ms-clear{   /*ie10 имеет свой крестик*/
   display: none;
}
