define('Deprecated/Controls/GroupCheckBox/Demo/MyGroupCheckbox/MyGroupCheckbox', [
   'SBIS3.CONTROLS/Utils/InformationPopupManager',
   'Lib/Control/CompoundControl/CompoundControl',
   'html!Deprecated/Controls/GroupCheckBox/Demo/MyGroupCheckbox/MyGroupCheckbox',
   'Deprecated/Controls/FieldDropdown/FieldDropdown',
   'Deprecated/Controls/GroupCheckBox/GroupCheckBox',
   'Deprecated/Controls/Button/Button',
   'Deprecated/Controls/FieldLabel/FieldLabel'
], function(
   InformPopManager,
   CompoundControl,
   dotTplFn
) {
   /**
    * Deprecated/Controls/GroupCheckBox/Demo/MyGroupCheckbox/MyGroupCheckbox
    * @class Deprecated/Controls/GroupCheckBox/Demo/MyGroupCheckbox/MyGroupCheckbox
    * @extends Lib/Control/CompoundControl/CompoundControl
    * @control
    */
   var moduleClass = CompoundControl.extend(/** @lends Deprecated/Controls/GroupCheckBox/Demo/MyGroupCheckbox/MyGroupCheckbox.prototype */{
      _dotTplFn: dotTplFn,
      $protected: {
         _options: {
            
         }
      },
      $constructor: function() {
      },

      init: function() {
         moduleClass.superclass.init.call(this);
         var self = this;
         this.getChildControlByName("ФлагиОснова").subscribe("onChange", function(event,record,name){
            var 
               val=record.get(name),
               cena=self.getChildControlByName('price'),
               ves=self.getChildControlByName('weight');
            if(val){
               cena.setValue(parseInt(cena.getValue())+36);
               ves.setValue(parseInt(ves.getValue())+22);
            }
            else{
               cena.setValue(parseInt(cena.getValue())-36);
               ves.setValue(parseInt(ves.getValue())-22);
            }      
         });
         this.getChildControlByName("ФлагиСыр").subscribe("onChange", function(event,record,name){
            var 
               val=record.get(name),
               cena=self.getChildControlByName('price'),
               ves=self.getChildControlByName('weight');
            if(val){
               cena.setValue(parseInt(cena.getValue())+40);
               ves.setValue(parseInt(ves.getValue())+36);
            }
            else{
               cena.setValue(parseInt(cena.getValue())-40);
               ves.setValue(parseInt(ves.getValue())-36);
            }   
         });
         this.getChildControlByName("ФлагиМясо").subscribe("onChange", function(event,record,name){
            var 
               val=record.get(name),
               cena=self.getChildControlByName('price'),
               ves=self.getChildControlByName('weight');
            if(val){
               cena.setValue(parseInt(cena.getValue())+29);
               ves.setValue(parseInt(ves.getValue())+52);
            }
            else{
               cena.setValue(parseInt(cena.getValue())-29);
               ves.setValue(parseInt(ves.getValue())-52);
            }   
         });
         this.getChildControlByName("ФлагиДополнительно").subscribe("onChange", function(event,record,name){
            var 
               val=record.get(name),
               cena=self.getChildControlByName('price'),
               ves=self.getChildControlByName('weight');
            if(val){
               cena.setValue(parseInt(cena.getValue())+20);
               ves.setValue( parseInt(ves.getValue())+20);
            }
            else{
               cena.setValue(parseInt(cena.getValue())-20);
               ves.setValue(parseInt(ves.getValue())-20);
            }  
         });
         this.getChildControlByName("Button").subscribe("onActivated", function(){
            var 
               rec1=self.getChildControlByName('ФлагиОснова').getValue(),
               rec2=self.getChildControlByName('ФлагиСыр').getValue(),
               rec3=self.getChildControlByName('ФлагиМясо').getValue(),
               rec4=self.getChildControlByName('ФлагиДополнительно').getValue();
            rec1.set({
               "Кетчуп":true,
               "Майонез":false,
               "Соус":false
            });
            rec2.set({
               "ФлагСыр1":true,
               "ФлагСыр2":false,
               "ФлагСыр3":false,
               "ФлагСыр4":false,
               "ФлагСыр5":false
            });
            rec3.set({
               "ФлагКурица":true,
               "ФлагКолбаски":false,
               "ФлагРыба":false,
               "ФлагКреветки":false,
               "ФлагСвинина":false
            });
            rec4.set({
               "ФлагДоп1":true,
               "ФлагДоп2":false,
               "ФлагДоп3":false,
               "ФлагДоп4":false,
               "ФлагДоп5":false
            });
            self.getChildControlByName('ФлагиОснова').setValue(rec1);         
            self.getChildControlByName('ФлагиСыр').setValue(rec2);            
            self.getChildControlByName('ФлагиМясо').setValue(rec3);           
            self.getChildControlByName('ФлагиДополнительно').setValue(rec4);
            self.getChildControlByName('price').setValue(228);
            self.getChildControlByName('weight').setValue(405);
            self.getChildControlByName('Тесто').setValue(1);
            InformPopManager.showMessageDialog({
               status: 'default',
               message: 'Ваш заказ оформлен. Время ожидания - 40 минут. Спасибо! BON APPETIT!'
            });            
         });
      }
   });
   return moduleClass;
});